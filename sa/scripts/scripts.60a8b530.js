"use strict";angular.module("saApp",["ngResource","ngRoute","ui.bootstrap"]).value("zidong","/api/as/").value("shoudong","/api/ac/").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/ticket/list",{templateUrl:"views/ticket/list.html",controller:"TicketlistCtrl",controllerAs:"ticketlist",resolve:{view:["view",function(a){return a.slist}],list:["ticket",function(a){return a.list()}],start:["ticket",function(a){return a.start()}],stop:["ticket",function(a){return a.stop()}]}}).when("/ticket/create",{templateUrl:"views/ticket/info.html",controller:"TicketcreateCtrl",controllerAs:"ticketcreate",resolve:{view:["view",function(a){return a.slist}],create:["ticket",function(a){return a.create()}],getDate:["common",function(a){return a.getDate}]}}).when("/ticket/edit/:typecode",{templateUrl:"views/ticket/info.html",controller:"TicketinfoCtrl",controllerAs:"ticketinfo",resolve:{view:["view",function(a){return a.slist}],info:["ticket",function(a){return a.info()}],edit:["ticket",function(a){return a.edit()}],type:function(){return"edit"},getDate:["common",function(a){return a.getDate}],getDateObj:["common",function(a){return a.getDateObj}]}}).when("/view/list",{templateUrl:"views/view/list.html",controller:"ViewlistCtrl",controllerAs:"viewlist",resolve:{theme:["common",function(a){return a.theme}],list:["view",function(a){return a.list()}],start:["view",function(a){return a.start()}],stop:["view",function(a){return a.stop()}]}}).when("/view/create",{templateUrl:"views/view/info.html",controller:"ViewcreateCtrl",controllerAs:"viewcreate",resolve:{theme:["common",function(a){return a.theme}],create:["view",function(a){return a.create()}]}}).when("/line/freelist",{templateUrl:"views/line/freelist.html",controller:"LinefreelistCtrl",controllerAs:"linefreelist",resolve:{list:["line",function(a){return a.flist()}],start:["line",function(a){return a.fstart()}],stop:["line",function(a){return a.fstop()}]}}).when("/line/freecreate",{templateUrl:"views/line/freeinfo.html",controller:"LinefreecreateCtrl",controllerAs:"linefreecreate",resolve:{view:["view",function(a){return a.slist}],create:["line",function(a){return a.fcreate()}]}}).when("/line/freeorder/:linecode",{templateUrl:"views/line/freeorder.html",controller:"LinefreeorderCtrl",controllerAs:"linefreeorder",resolve:{list:["order",function(a){return a.flist()}],cancel:["order",function(a){return a.fcancel()}]}}).when("/activity/half/list",{templateUrl:"views/activity/half/list.html",controller:"actHalfListCtrl",controllerAs:"acthalflist",resolve:{list:["activity",function(a){return a.halflist()}],start:["activity",function(a){return a.halfstart()}],stop:["activity",function(a){return a.halfstop()}]}}).when("/activity/half/create",{templateUrl:"views/activity/half/info.html",controller:"actHalfCreateCtrl",controllerAs:"acthalfcreate",resolve:{model:["activity",function(a){return a.half}],create:["activity",function(a){return a.halfcreate()}],list:["ticket",function(a){return a.list()}]}}).when("/activity/half/edit/:code",{templateUrl:"views/activity/half/info.html",controller:"actHalfinfoCtrl",controllerAs:"acthalfinfo",resolve:{info:["activity",function(a){return a.halfinfo()}],edit:["activity",function(a){return a.halfedit()}],list:["ticket",function(a){return a.list()}],type:function(){return"edit"}}}).when("/activity/half/info/:code",{templateUrl:"views/activity/half/info.html",controller:"actHalfinfoCtrl",controllerAs:"acthalfinfo",resolve:{info:["activity",function(a){return a.halfinfo()}],edit:["activity",function(a){return a.halfedit()}],list:["ticket",function(a){return a.list()}],type:function(){return"info"}}}).when("/activity/half/orderlist",{templateUrl:"views/activity/half/orderlist.html",controller:"actHalfOrderListCtrl",controllerAs:"acthalforderlistCtrl",resolve:{list:["order",function(a){return a.hlist()}]}}).otherwise({redirectTo:"/"})}]).config(["$httpProvider",function(a){a.interceptors.push("httpInjector")}]),angular.module("saApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("saApp").factory("common",["$resource","zidong","$q","$http",function(a,b,c,d){var e=b+"tc/theme/list ";return{theme:function(a){var b=c.defer();return d({method:"GET",params:a,url:e}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise},getDate:function(a){return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()},getDateObj:function(a){var b=new RegExp("\\-","gi");a=a.replace(b,"/"),alert(a);var c=Date.parse(a);alert(c);var d=new Date;return d.setTime(c),alert(d),d}}}]),angular.module("saApp").factory("line",["$resource","zidong","$q","$http",function(a,b,c,d){var e=b+"ac/wealfare/adminlist",f=b+"ac/wealfare/admincreat",g=b+"ac/wealfare/adminstart",h=b+"ac/wealfare/adminstop";return{flist:function(){return a(e,{},{})},fcreate:function(){return a(f,{},{})},fstart:function(){return a(g,{},{})},fstop:function(){return a(h,{},{})}}}]),angular.module("saApp").factory("ticket",["$resource","zidong","shoudong",function(a,b,c){var d=b+"tc/type/adminList",e=c+"tc/ticketTypeService/create",f=b+"tc/type/adminInfo",g=b+"tc/type/edit",h=b+"tc/type/adminStart",i=b+"tc/type/adminStop";return{list:function(){return a(d,{},{})},create:function(){return a(e,{},{})},edit:function(){return a(g,{},{})},info:function(){return a(f,{},{})},start:function(){return a(h,{},{})},stop:function(){return a(i,{},{})}}}]),angular.module("saApp").factory("view",["$resource","zidong","$q","$http",function(a,b,c,d){var e=b+"tc/view/adminList",f=b+"tc/view/adminViewForTicketList",g=b+"",h=b+"",i=b+"",j=b+"tc/view/adminStart",k=b+"tc/view/adminStop";return{list:function(){return a(e,{},{})},create:function(){return a(g,{},{})},edit:function(){return a(h,{},{})},del:function(){return a(i,{},{})},start:function(){return a(j,{},{})},stop:function(){return a(k,{},{})},slist:function(a){var b=c.defer();return d({method:"GET",params:a,url:f}).success(function(a,c,d,e){b.resolve(a)}).error(function(a,c,d,e){b.reject(a)}),b.promise}}}]),angular.module("saApp").factory("order",["$resource","zidong","shoudong","$q","$http",function(a,b,c,d,e){var f=b+"ac/wealfareorder/adminlist",g=c+"ac/wealfareService/admincancel",h=b+"tc/half/orderlist";return{flist:function(){return a(f,{},{})},fcancel:function(){return a(g,{},{})},hlist:function(){return a(h,{},{})}}}]),angular.module("saApp").factory("activity",["$resource","zidong",function(a,b){var c=b+"tc/half/list",d=b+"tc/half/create",e=b+"tc/half/start",f=b+"tc/half/stop",g=b+"tc/half/info",h=b+"tc/half/edit";return{half:{title:"",type:"t",minus:"0",subsidy:"0",price:"0",code:""},halflist:function(){return a(c,{},{})},halfcreate:function(){return a(d,{},{})},halfstart:function(){return a(e,{},{})},halfstop:function(){return a(f,{},{})},halfinfo:function(){return a(g,{},{})},halfedit:function(){return a(h,{},{})}}}]),angular.module("saApp").factory("httpInjector",["$location",function(a){var b={response:function(a){return 1001===a.data.errcode&&(window.location="/manager/login"),a}};return b}]),angular.module("saApp").controller("TicketlistCtrl",["$scope","$location","list","view","start","stop",function(a,b,c,d,e,f){a.navigation=[{title:"门票"},{title:"列表"}],a.searchform={},d().then(function(b){console.log(b),0===b.errcode?a.viewarr=b.data:alert("景区加载失败")}),a.maxSize=5,a.bigCurrentPage=1,a.itemsPerPage=7,a.load=function(){var b={pageNo:a.bigCurrentPage,pageSize:a.itemsPerPage};b=angular.extend(a.searchform,b),console.log(b),c.save(b,function(b){return console.log(b),0!==b.errcode?void alert("数据获取失败"):(a.objs=b.data.results,void(a.bigTotalItems=b.data.totalRecord))})},a.load(),a.create=function(){b.path("/ticket/create")},a.start=function(b){confirm("启用该票种后将不能编辑，确定要启用吗 ？ ")&&e.get({code:b},function(b){console.log(b),0===b.errcode?a.load():alert("启用失败")})},a.stop=function(b){confirm("停用该票种后将不能卖票，确定要停用吗 ？ ")&&f.get({code:b},function(b){0===b.errcode?a.load():alert("停用失败")})}}]),angular.module("saApp").controller("TicketcreateCtrl",["$scope","create","view","getDate","$location",function(a,b,c,d,e){a.navigation=[{title:"门票"},{title:"列表"},{title:"新建票种"}],a.obj={},a.dt1=new Date,a.open1=function(b){a.status1.opened=!0},a.status1={opened:!1},c().then(function(b){0===b.errcode?(a.viewarr=b.data,a.obj.view=b.data[0].code):alert("景区加载失败")}),a.gogo=function(){a.obj.period=d(a.dt1),console.log(a.obj),b.save(a.obj,function(a){return console.log(a),0!==a.errcode?void alert("数据获取失败"):(0==a.errcode,alert("添加成功"),e.path("/ticket/edit/"+a.data),void 0)})}}]),angular.module("saApp").controller("TicketinfoCtrl",["$scope","type","view","info","edit","$routeParams","getDateObj",function(a,b,c,d,e,f,g){a.navigation=[{title:"门票"},{title:"列表"},{title:"edit"===b?"编辑票种信息":"查看票种信息"}];var h=f.typecode;a.btnhide="edit"===b?!0:!1,a.obj={},a.obj.period=new Date,a.open1=function(b){a.status1.opened=!0},a.status1={opened:!1},c().then(function(b){0===b.errcode?(a.viewarr=b.data,a.obj.view=b.data[0].code):alert("景区加载失败")}),d.get({code:h},function(a){return console.log(a),0!==a.errcode?void alert("获取数据失败"):void 0}),a.gogo=function(){}}]),angular.module("saApp").controller("ViewlistCtrl",["$scope","$location","list","theme","start","stop",function(a,b,c,d,e,f){a.navigation=[{title:"景区"},{title:"列表"}],a.searchform={},d().then(function(b){console.log(b),0===b.errcode?a.themearr=b.data:alert("主题加载失败")}),a.maxSize=5,a.bigCurrentPage=1,a.itemsPerPage=7,a.load=function(){var b={pageNo:a.bigCurrentPage,pageSize:a.itemsPerPage};b=angular.extend(a.searchform,b),c.save(b,function(b){return console.log(b),0!==b.errcode?void alert("数据获取失败"):(a.objs=b.data.results,void(a.bigTotalItems=b.data.totalRecord))})},a.load(),a.create=function(){b.path("/view/create")},a.start=function(b){confirm("启用该景区后将不能编辑，确定要启用吗 ？ ")&&e.get({code:b},function(b){console.log(b),0===b.errcode?a.load():alert("启用失败")})},a.stop=function(b){confirm("停用该景区后将不能卖票，确定要停用吗 ？ ")&&f.get({code:b},function(b){0===b.errcode?a.load():alert("停用失败")})}}]),angular.module("saApp").controller("ViewcreateCtrl",["$scope","create","theme",function(a,b,c){a.navigation=[{title:"景区"},{title:"列表"},{title:"新建景区"}],a.obj={},a.obj.city="1",c().then(function(b){0===b.errcode?(a.themearr=b.data,a.obj.theme=b.data[0].theme):alert("主题加载失败")})}]),angular.module("saApp").controller("ViewinfoCtrl",["$scope","list","theme",function(a,b,c){}]),angular.module("saApp").controller("LinefreelistCtrl",["$scope","$location","list","start","stop",function(a,b,c,d,e){a.navigation=[{title:"线路"},{title:"公益游"}],a.searchform={},a.maxSize=5,a.bigCurrentPage=1,a.itemsPerPage=7,a.load=function(){var b={pageNo:a.bigCurrentPage,pageSize:a.itemsPerPage};b=angular.extend(a.searchform,b),console.log(b),c.save(b,function(b){return console.log(b),0!==b.errcode?void alert("数据获取失败"):(a.objs=b.data.results,void(a.bigTotalItems=b.data.totalRecord))})},a.load(),a.create=function(){b.path("/line/freecreate")},a.start=function(b){confirm("启用该活动将不能编辑，确定要启用吗 ？ ")&&d.get({code:b},function(b){console.log(b),0===b.errcode?a.load():alert("启用失败")})},a.stop=function(b){confirm("停用该活动不能报名，确定要停用吗 ？ ")&&e.get({code:b},function(b){console.log(b),0===b.errcode?a.load():alert("停用失败")})}}]),angular.module("saApp").controller("LinefreecreateCtrl",["$scope","create","view",function(a,b,c){a.navigation=[{title:"线路"},{title:"列表"},{title:"新建公益游"}]}]),angular.module("saApp").controller("LinefreeinfoCtrl",function(){$scope.navigation=[{title:"线路"},{title:"列表"},{title:"公益游详情"}],$scope.obj={}}),angular.module("saApp").controller("LinefreeorderCtrl",["$scope","list","$routeParams","cancel",function(a,b,c,d){var e=c.linecode;a.navigation=[{title:"线路"},{title:"公益游"},{title:"订单"}],a.obj={},a.load=function(){b.get({code:e},function(b){return console.log(b),0!==b.errcode?void alert("数据获取失败"):void(a.objs=b.data)})},a.load(),a.cancel=function(b,c,e){confirm("取消后不能恢复，确定要取消吗 ？ ")&&d.get({code:b,aid:c,uid:e},function(b){console.log(b),0===b.errcode?a.load():alert("取消失败")})}}]),angular.module("saApp").controller("actHalfListCtrl",["$scope","$location","list","start","stop",function(a,b,c,d,e){a.navigation=[{title:"活动"},{title:"半价游"}],a.searchform={},a.maxSize=5,a.bigCurrentPage=1,a.itemsPerPage=7,a.load=function(){var b={pageNo:a.bigCurrentPage,pageSize:a.itemsPerPage};b=angular.extend(a.searchform,b),console.log(b),c.save(b,function(b){return console.log(b),0!==b.errcode?void alert("数据获取失败"):(a.objs=b.data.results,void(a.bigTotalItems=b.data.totalRecord))})},a.load(),a.create=function(){b.path("/activity/half/create")},a.start=function(b){confirm("启用该活动将不能编辑，确定要启用吗 ？ ")&&d.get({code:b},function(b){console.log(b),0===b.errcode?a.load():alert("启用失败")})},a.stop=function(b){confirm("停用该活动不能报名，确定要停用吗 ？ ")&&e.get({code:b},function(b){console.log(b),0===b.errcode?a.load():alert("停用失败")})}}]),angular.module("saApp").controller("actHalfinfoCtrl",["$scope","info","edit","list","type","$routeParams",function(a,b,c,d,e,f){a.navigation=[{title:"活动"},{title:"半价游"},{title:"edit"===e?"编辑半价产品信息":"查看半价产品信息"}];var g=f.code;a.btnhide="edit"===e?!0:!1,a.obj={},d.get({},function(b){return console.log(b),0!==b.errcode?void alert("数据获取失败"):void(a.tkttypes=b.data)}),b.get({code:g},function(b){return console.log(b),0!==b.errcode?void alert("获取数据失败"):void(a.obj=b.data)}),a.gogo=function(){c.save({id:g},a.obj,function(a){return console.log(a),0!==a.errcode?void alert("修改失败"):void alert("修改成功")})}}]),angular.module("saApp").controller("actHalfCreateCtrl",["$scope","create","model","list",function(a,b,c,d){a.navigation=[{title:"活动"},{title:"半价游"},{title:"新建半价游产品"}],a.obj=c,d.get({},function(b){return console.log(b),0!==b.errcode?void alert("数据获取失败"):void(a.tkttypes=b.data)}),a.gogo=function(){b.save(a.obj,function(a){return console.log(a),0!==a.errcode?void alert("数据获取失败"):(0==a.errcode,void alert("添加成功"))})}}]),angular.module("saApp").controller("actHalfOrderListCtrl",["$scope","$location","list",function(a,b,c){a.navigation=[{title:"活动"},{title:"半价游订单"}],a.searchform={}}]),angular.module("saApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/line/freeinfo.html",'<ol class="breadcrumb"> <li ng-repeat="nav in navigation">{{nav.title}}</li> </ol> <div class="col-md-8 form-horizontal mt10"> <div class="form-group"> <label class="col-md-2 control-label">景区</label> <div class="col-md-10"> <select class="form-control" ng-model="obj.view" ng-options="view.code as view.name for view in viewarr"> </select> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">票种名称</label> <div class="col-md-10"> <input type="text" class="form-control" ng-model="obj.name" placeholder="必填" required> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">有效期</label> <div class="col-md-10"> <input type="text" class="form-control" ng-model="obj.period"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">最大购票数</label> <div class="col-md-10"> <input type="text" class="form-control" ng-model="obj.max_sell"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">预订说明</label> <div class="col-md-10"> <textarea class="form-control" rows="2" ng-model="obj.book_info"></textarea> </div> </div> <button type="button" class="btn btn-primary btn-lg btn-block" ng-click="create()"> 提交吧！黄同学 </button> </div> <div class="col-md-4 mt10"> <div class="form-horizontal"> <div class="form-group"> <label class="col-md-4 control-label">市场价格</label> <div class="col-md-8"> <input type="text" class="form-control" ng-model="obj.market_price"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label">居游价格</label> <div class="col-md-8"> <input type="text" class="form-control" ng-model="obj.guide_price"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label">成本价（散）</label> <div class="col-md-8"> <input type="text" class="form-control" ng-model="obj.cost_price_visitor"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label">成本价（团）</label> <div class="col-md-8"> <input type="text" class="form-control" ng-model="obj.cost_price_group"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label">补贴</label> <div class="col-md-8"> <input type="text" class="form-control" ng-model="obj.subsidy"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label">返利</label> <div class="col-md-8"> <input type="text" class="form-control" ng-model="obj.rebate"> </div> </div> </div> </div>'),a.put("views/line/freelist.html",'<ol class="breadcrumb"> <li ng-repeat="nav in navigation">{{nav.title}}</li> </ol> <div class="panel panel-default"> <div class="panel-body"> <div class="form-group form-inline"> <div class="col-md-10"> <label>关键字</label>&nbsp;&nbsp; <input type="text" class="form-control" ng-model="searchform.keyword"> &nbsp;&nbsp;&nbsp;&nbsp; <label>状态</label>&nbsp;&nbsp; <select class="form-control" ng-model="searchform.state"> <option value=""> --全部-- </option> <option value="0"> 不启用 </option> <option value="1"> 报名中 </option> </select> &nbsp;&nbsp;&nbsp;&nbsp; <button type="button" class="btn btn-default" ng-click="load()">立即搜索</button> </div> <div class="col-md-2 text-right"> <button type="button" class="btn btn-info" ng-click="create()">发布公益游活动</button> </div> </div> </div> </div><!-- searchArea --> <table class="table table-bordered"> <thead> <tr> <th class="text-center">活动名称</th> <th class="col-md-1 text-center">当前人数</th> <th class="col-md-2 text-center">活动时间</th> <th class="col-md-2 text-center">报名时限</th> <th class="col-md-1 text-center">人数限制</th> <th class="col-md-1 text-center">状态</th> <th class="col-md-2 text-center">操作</th> </tr> </thead> <tbody> <tr ng-repeat="obj in objs"> <td>{{obj.title}}</td> <td class="text-center">{{obj.curent_num}}</td> <td class="text-center">{{obj.hd_time}}</td> <td class="text-center">{{obj.hd_stop}}</td> <td class="text-center">{{obj.hd_limit}}</td> <td class="text-center">{{obj._state}}</td> <td class="text-center"> <a ng-show="obj.state==\'0\'" ng-click="start(obj.code)" class="btn btn-primary btn-xs">启用</a> <a ng-show="obj.state==\'1\'" ng-click="stop(obj.code)" class="btn btn-success btn-xs">停用</a> <a ng-show="obj.state==\'0\'" ng-href="#line/freeedit/{{obj.code}}" class="btn btn-warning btn-xs">编辑</a> <a ng-href="#/line/freeorder/{{obj.code}}" class="btn btn-danger btn-xs">查看订单</a> </td> </tr> </tbody> </table> <div class="text-right"> <pagination items-per-page="itemsPerPage" total-items="bigTotalItems" ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm" boundary-links="true" rotate="false" num-pages="numPages" previous-text="上一页" next-text="下一页" first-text="首页" last-text="末页" ng-change="load()"></pagination> </div>'),a.put("views/line/freeorder.html",'<ol class="breadcrumb"> <li ng-repeat="nav in navigation">{{nav.title}}</li> </ol> <div class="panel panel-default"> <div class="panel-body"> <div class="form-group form-inline"> <div class="col-md-10"> <label>关键字</label>&nbsp;&nbsp; <input type="text" class="form-control" ng-model="searchform.keyword"> &nbsp;&nbsp;&nbsp;&nbsp; <label>状态</label>&nbsp;&nbsp; <select class="form-control" ng-model="searchform.state"> <option value=""> --全部-- </option> <option value="0"> 未支付 </option> <option value="1"> 已支付 </option> </select> &nbsp;&nbsp;&nbsp;&nbsp; <button type="button" class="btn btn-default" ng-click="load()">立即搜索</button> </div> </div> </div> </div><!-- searchArea --> <table class="table table-bordered"> <thead> <tr> <th class="col-md-1 text-center">姓名</th> <th class="col-md-2 text-center">身份证</th> <th class="col-md-1 text-center">电话</th> <th class="col-md-2 text-center">下单时间</th> <th class="col-md-1 text-center">支付状态</th> <th class="text-center">备注</th> <th class="col-md-1 text-center">操作</th> </tr> </thead> <tbody> <tr ng-repeat="obj in objs"> <td class="text-center">{{obj.name}}</td> <td class="text-center">{{obj.cardno}}</td> <td class="text-center">{{obj.tel}}</td> <td class="text-center">{{obj.create_time}}</td> <td class="text-center">{{obj._state}}</td> <td class="text-center">{{obj.note}}</td> <td class="text-center"> <a ng-show="obj.del_flg==\'0\'" ng-click="cancel(obj.out_trade_no, obj.aid, obj.uid)" class="btn btn-success btn-xs">取消</a> <span ng-show="obj.del_flg==\'1\'">已取消</span> </td> </tr> </tbody> </table>'),a.put("views/main.html","main"),a.put("views/ticket/info.html",'<ol class="breadcrumb"> <li ng-repeat="nav in navigation">{{nav.title}}</li> </ol> <div class="col-md-8 form-horizontal mt10"> <div class="form-group"> <label class="col-md-2 control-label">景区</label> <div class="col-md-10"> <select class="form-control" ng-model="obj.view" ng-options="view.code as view.name for view in viewarr"> </select> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">票种名称</label> <div class="col-md-10"> <input type="text" class="form-control" ng-model="obj.name" placeholder="必填" required> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">有效期</label> <div class="col-md-10"> <!-- <input type="text" class="form-control" ng-model="obj.period"> --> <div class="input-group"> <input type="text" class="form-control" ng-model="dt1" datepicker-popup="yyyy-mm-dd" is-open="status1.opened" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" placeholder="请输入开始时间" readonly> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="open1($event)"> <i class="glyphicon glyphicon-calendar"></i> </button> </span> </div> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">最大购票数</label> <div class="col-md-10"> <input type="text" class="form-control" ng-model="obj.max_sell"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">预订说明</label> <div class="col-md-10"> <textarea class="form-control" rows="2" ng-model="obj.book_info"></textarea> </div> </div> <button type="button" class="btn btn-primary btn-lg btn-block" ng-click="gogo()"> 提交吧！黄同学 </button> </div> <div class="col-md-4 mt10"> <div class="form-horizontal"> <div class="form-group"> <label class="col-md-4 control-label">市场价格</label> <div class="col-md-8"> <input type="text" class="form-control" ng-model="obj.market_price"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label">居游价格</label> <div class="col-md-8"> <input type="text" class="form-control" ng-model="obj.guide_price"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label">成本价（散）</label> <div class="col-md-8"> <input type="text" class="form-control" ng-model="obj.cost_price_visitor"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label">成本价（团）</label> <div class="col-md-8"> <input type="text" class="form-control" ng-model="obj.cost_price_group"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label">补贴</label> <div class="col-md-8"> <input type="text" class="form-control" ng-model="obj.subsidy"> </div> </div> <div class="form-group"> <label class="col-md-4 control-label">返利</label> <div class="col-md-8"> <input type="text" class="form-control" ng-model="obj.rebate"> </div> </div> </div> </div>'),a.put("views/ticket/list.html",'<ol class="breadcrumb"> <li>门票</li> <li>列表</li> </ol> <div class="panel panel-default"> <div class="panel-body"> <div class="form-group form-inline"> <div class="col-md-10"> <label>景区</label>&nbsp;&nbsp; <select class="form-control" ng-model="searchform.view" ng-options="view.code as view.name for view in viewarr"> <option value=""> --全部-- </option> </select> &nbsp;&nbsp;&nbsp;&nbsp; <label>关键字</label>&nbsp;&nbsp; <input type="text" class="form-control" ng-model="searchform.keyword"> &nbsp;&nbsp;&nbsp;&nbsp; <label>状态</label>&nbsp;&nbsp; <select class="form-control" ng-model="searchform.state"> <option value=""> --全部-- </option> <option value="1"> 启用 </option> <option value="0"> 停用 </option> </select> &nbsp;&nbsp;&nbsp;&nbsp; <button type="button" class="btn btn-default search" ng-click="load()">立即搜索</button> </div> <div class="col-md-2 text-right"> <button type="button" class="btn btn-info new" ng-click="create()">发布新票种</button> </div> </div> </div> </div><!-- searchArea --> <div class="panel panel-default"> <!-- Default panel contents --> <div class="panel-heading">Panel heading</div> <!-- Table --> <table class="table"> ... </table> </div> <table class="table table-bordered"> <thead> <tr> <th class="text-center">票种名称</th> <th class="col-md-1 text-center">市场价格</th> <th class="col-md-1 text-center">居游价格</th> <th class="col-md-1 text-center">成本价(散)</th> <th class="col-md-1 text-center">成本价(团)</th> <th class="col-md-1 text-center">排序</th> <th class="col-md-1 text-center">状态</th> <th class="col-md-2 text-center">操作</th> </tr> </thead> <tbody> <tr ng-repeat="obj in objs"> <td>{{obj.name}}</td> <td class="text-center">{{obj.market_price}}</td> <td class="text-center">{{obj.guide_price}}</td> <td class="text-center">{{obj.cost_price_visitor}}</td> <td class="text-center">{{obj.cost_price_group}}</td> <td class="text-center">{{obj.asort}}</td> <td class="text-center">{{obj._state}}</td> <td class="text-center"> <a ng-show="obj.state==\'0\'" ng-click="start(obj.code)" class="btn btn-primary btn-xs">启用</a> <a ng-show="obj.state==\'1\'" ng-click="stop(obj.code)" class="btn btn-success btn-xs">停用</a> <a ng-show="obj.state==\'0\'" ng-href="#view/edit/{{obj.code}}" class="btn btn-warning btn-xs">编辑</a> </td> </tr> </tbody> </table> <div class="text-right"> <pagination items-per-page="itemsPerPage" total-items="bigTotalItems" ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm" boundary-links="true" rotate="false" num-pages="numPages" previous-text="上一页" next-text="下一页" first-text="首页" last-text="末页" ng-change="load()"></pagination> </div>'),a.put("views/view/info.html",'<ol class="breadcrumb"> <li ng-repeat="nav in navigation">{{nav.title}}</li> </ol> <div class="col-md-8 form-horizontal mt10"> <div class="form-group"> <label class="col-md-2 control-label">景区名称</label> <div class="col-md-10"> <input type="text" class="form-control" ng-model="obj.name" placeholder="必填" required> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">描述</label> <div class="col-md-10"> <input type="text" class="form-control" placeholder="对该景区的简要描述" ng-model="obj.subname"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">景区主题</label> <div class="col-md-4"> <select class="form-control" ng-model="obj.theme" ng-options="theme.theme as theme.theme_name for theme in themearr"> </select> </div> <label class="col-md-2 control-label">所属城市</label> <div class="col-md-4"> <select class="form-control" ng-model="obj.city"> <option value="1">沈阳</option> <option value="2">鞍山</option> <option value="3">抚顺</option> <option value="4">本溪</option> <option value="5">营口</option> <option value="6">阜新</option> <option value="8">辽阳</option> <option value="7">铁岭</option> </select> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">星级</label> <div class="col-md-4"> <input type="text" class="form-control" ng-model="obj.star"> </div> <label class="col-md-2 control-label">提前入园时间</label> <div class="col-md-4"> <input type="text" class="form-control" ng-model="obj.bef_hour"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">经度</label> <div class="col-md-4"> <input type="text" class="form-control" ng-model="obj.longitude"> </div> <label class="col-md-2 control-label">纬度</label> <div class="col-md-4"> <input type="text" class="form-control" ng-model="obj.latitude"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">开放日期</label> <div class="col-md-4"> <input type="text" class="form-control" ng-model="obj.open_date"> </div> <label class="col-md-2 control-label">开放时间</label> <div class="col-md-4"> <input type="text" class="form-control" ng-model="obj.open_time"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">地址</label> <div class="col-md-10"> <textarea class="form-control" rows="2" ng-model="obj.address"></textarea> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">服务承诺</label> <div class="col-md-10"> <textarea class="form-control" rows="2" ng-model="obj.promise"></textarea> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">预订须知</label> <div class="col-md-10"> <textarea class="form-control" rows="2" ng-model="obj.book_info"></textarea> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">优惠政策</label> <div class="col-md-10"> <textarea class="form-control" rows="2" ng-model="obj.fav_policy"></textarea> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">全景地址</label> <div class="col-md-10"> <input type="text" class="form-control" ng-model="obj.view720_url"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">电子杂志</label> <div class="col-md-10"> <input type="text" class="form-control" ng-model="obj.ebook_url"> </div> </div> <button type="button" class="btn btn-primary btn-lg btn-block">提交吧！黄同学</button> </div> <div class="col-md-4 mt10"> <label class="control-label">logo</label> <img ng-src="{{obj.logo}}" width="100%" height="200" ng-model="obj.logo"> <input type="file" nv-file-select uploader="uploader"><br> <ul class="list-group"> <li class="list-group-item" ng-repeat="item in uploader.queue"> 文件名: <span ng-bind="item.file.name"></span> <button type="button" class="btn btn-default btn-xs" ng-click="item.upload()"><span class="glyphicon glyphicon-upload"></span> 上传</button> <div class="progress mt10"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div> </div> </li> </ul> <label class="control-label">景区顶图</label> <img ng-src="{{obj.top_img}}" width="100%" height="200" ng-model="obj.top_img"> <input type="file" nv-file-select uploader="uploader"><br> <ul class="list-group"> <li class="list-group-item" ng-repeat="item in uploader.queue"> 文件名: <span ng-bind="item.file.name"></span> <button type="button" class="btn btn-default btn-xs" ng-click="item.upload()"><span class="glyphicon glyphicon-upload"></span> 上传</button> <div class="progress mt10"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div> </div> </li> </ul> <div class="form-horizontal"> <div class="form-group"> <label class="col-md-2 control-label">好评</label> <div class="col-md-10"> <input type="text" class="form-control" ng-model="obj.ev_good"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">一般</label> <div class="col-md-10"> <input type="text" class="form-control" ng-model="obj.ev_general"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label">差评</label> <div class="col-md-10"> <input type="text" class="form-control" ng-model="obj.ev_bad"> </div> </div> </div> </div>'),a.put("views/view/list.html",'<ol class="breadcrumb"> <li ng-repeat="nav in navigation">{{nav.title}}</li> </ol> <div class="panel panel-default"> <div class="panel-body"> <div class="form-group form-inline"> <div class="col-md-10"> <label>主题</label>&nbsp;&nbsp; <select class="form-control" ng-model="searchform.theme" ng-options="theme.theme as theme.theme_name for theme in themearr"> <option value=""> --全部-- </option> </select> &nbsp;&nbsp;&nbsp;&nbsp; <label>关键字</label>&nbsp;&nbsp; <input type="text" class="form-control" ng-model="searchform.keyword"> &nbsp;&nbsp;&nbsp;&nbsp; <label>状态</label>&nbsp;&nbsp; <select class="form-control" ng-model="searchform.state"> <option value=""> --全部-- </option> <option value="1"> 启用 </option> <option value="0"> 停用 </option> </select> &nbsp;&nbsp;&nbsp;&nbsp; <button type="button" class="btn btn-default" ng-click="load()">立即搜索</button> </div> <div class="col-md-2 text-right"> <button type="button" class="btn btn-info" ng-click="create()">发布新景区</button> </div> </div> </div> </div><!-- searchArea --> <table class="table table-bordered"> <thead> <tr> <th class="col-md-2 text-center">主题</th> <th class="text-center">景区名称</th> <th class="text-center col-md-2">排序</th> <th class="col-md-1 text-center">状态</th> <th class="col-md-2 text-center">操作</th> </tr> </thead> <tbody> <tr ng-repeat="obj in objs"> <td class="text-center">{{obj.theme_name}}</td> <td>{{obj.name}}</td> <td class="col-md-2"> <!-- <form class="form-inline">\n            <div class="form-group">\n              <input class="form-control input-sm" type="text" value="{{obj.asort}}" >\n            </div>\n            <a ng-click="asort(obj.code)" class="btn btn-primary btn-xs">排序</a> \n          </form>   --> <!-- <input class="form-control input-sm col-md-6" type="text" value="{{obj.asort}}" >\n          <a ng-click="asort(obj.code)" class="btn btn-primary btn-xs col-md-6">排序</a>  --> </td> <td class="text-center">{{obj._state}}</td> <td class="text-center"> <a ng-show="obj.state==\'0\'" ng-click="start(obj.code)" class="btn btn-primary btn-xs">启用</a> <a ng-show="obj.state==\'1\'" ng-click="stop(obj.code)" class="btn btn-success btn-xs">停用</a> <a ng-show="obj.state==\'0\'" ng-href="#view/edit/{{obj.code}}" class="btn btn-warning btn-xs">编辑</a> </td> </tr> </tbody> </table> <div class="text-right"> <pagination items-per-page="itemsPerPage" total-items="bigTotalItems" ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm" boundary-links="true" rotate="false" num-pages="numPages" previous-text="上一页" next-text="下一页" first-text="首页" last-text="末页" ng-change="load()"></pagination> </div>');
}]);